<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Multi-Tool • Terminal</title>
<style>
body {
margin: 0;
padding: 20px;
background: #0d1117;
color: #c9d1d9;
font-family: 'Courier New', Consolas, monospace;
font-size: 15px;
line-height: 1.45;
min-height: 100vh;
}
#output {
background: #161b22;
border: 1px solid #30363d;
border-radius: 6px;
padding: 16px;
white-space: pre-wrap;
word-wrap: break-word;
margin: 0 0 16px 0;
min-height: 220px;
max-height: 65vh;
overflow-y: auto;
}
#input-line {
display: flex;
align-items: center;
}
#prompt {
color: #58a6ff;
margin-right: 6px;
user-select: none;
}
#command {
background: transparent;
border: none;
color: #c9d1d9;
font: inherit;
outline: none;
flex: 1;
caret-color: #58a6ff;
}
.header {
color: #79c0ff;
font-weight: bold;
}
.error {
color: #ff6b6b;
}

/* Lock screen styles */
#lock-screen {
position: fixed;
inset: 0;
background: #0d1117;
display: flex;
flex-direction: column;
align-items: center;
justify-content: center;
z-index: 9999;
color: #c9d1d9;
}
#lock-screen.hidden {
display: none;
}
#pass-input {
background: #161b22;
border: 1px solid #30363d;
color: #c9d1d9;
font-size: 24px;
padding: 12px 16px;
width: 180px;
text-align: center;
letter-spacing: 8px;
font-family: monospace;
}
#pass-input::placeholder {
color: #444c56;
letter-spacing: normal;
}
#pass-error {
color: #ff6b6b;
margin-top: 12px;
min-height: 1.2em;
}
</style>
</head>
<body>

<!-- Lock screen overlay -->
<div id="lock-screen">
<h2 style="margin-bottom: 20px;">Enter Passcode</h2>
<input type="text" id="pass-input" maxlength="4" placeholder="••••" autocomplete="off" autofocus />
<div id="pass-error"></div>
</div>

<div id="main-content" style="display: none;">
<div id="output"></div>
<div id="input-line">
<span id="prompt">> </span>
<input type="text" id="command" autocomplete="off" spellcheck="false" />
</div>
</div>

<script>
const output = document.getElementById('output');
const commandInput = document.getElementById('command');
const lockScreen = document.getElementById('lock-screen');
const mainContent = document.getElementById('main-content');
const passInput = document.getElementById('pass-input');
const passError = document.getElementById('pass-error');

const CORRECT_PASSCODE = '4233';

let currentMenu = 'main';
let panicKey = null;
let panicKeyListener = null;

// Simple masked input handling (show bullets)
passInput.addEventListener('input', () => {
passError.textContent = '';
// We don't need to manually mask value — type="text" + letter-spacing + placeholder does visual masking
// Real value is still accessible for checking
});

passInput.addEventListener('keydown', (e) => {
if (e.key === 'Enter') {
e.preventDefault();
const entered = passInput.value.trim();
if (entered === CORRECT_PASSCODE) {
lockScreen.classList.add('hidden');
mainContent.style.display = 'block';
commandInput.focus();
drawMainMenu(); // Show initial menu after unlock
} else {
passError.textContent = 'Incorrect passcode.';
passInput.value = '';
passInput.focus();
}
}
});

// Start with lock screen visible
lockScreen.classList.remove('hidden');
mainContent.style.display = 'none';
passInput.focus();

// ────────────────────────────────────────────────

function print(text = '', className = '') {
const line = document.createElement('div');
line.className = className;
line.textContent = text;
output.appendChild(line);
output.scrollTop = output.scrollHeight;
}

function clearScreen() {
output.innerHTML = '';
}

function drawHeader(title) {
print('═══════════════════════════════════════════════════════', 'header');
print(' ' + title, 'header');
print('═══════════════════════════════════════════════════════', 'header');
print('');
}

function drawMainMenu() {
clearScreen();
drawHeader('MULTI-TOOL');
print(' [01] > Games');
print(' [02] > AI');
print(' [03] > Shortcuts');
print('');
print(' [99] > Exit');
print('');
}

function drawGamesMenu() {
clearScreen();
drawHeader('GAMES');
print(' [01] > Rainbet');
print(' [02] > Unblocked Hub');
print(' [03] > GTA: Vice City');
print('');
print(' [04] > Back');
print('');
}

function drawAIMenu() {
clearScreen();
drawHeader('AI');
print(' [01] > Jesko');
print(' [02] > Grok');
print('');
print(' [03] > Back');
print('');
}

function drawShortcutsMenu() {
clearScreen();
drawHeader('SHORTCUTS');
print(' [01] > New Window');
print(' [02] > Cloak Tab');
print(' [03] > Panic');
print('');
print(' [04] > Exit');
print('');
}

function drawPanicMenu() {
clearScreen();
drawHeader('PANIC KEYBIND');
print(' [01] > Remove Keybind' + (panicKey ? ` (current: ${panicKey})` : ''));
print(' [02] > Set Keybind');
print('');
print(' [03] > Exit');
print('');
}

function removePanicKeybind() {
if (panicKeyListener) {
document.removeEventListener('keydown', panicKeyListener);
panicKeyListener = null;
}
panicKey = null;
print('Panic keybind removed.');
}

function setPanicKeybind() {
print('Press any key to set as panic key... (Esc to cancel)');

const tempListener = (e) => {
e.preventDefault();
if (e.key === 'Escape') {
print('Cancelled.');
document.removeEventListener('keydown', tempListener);
drawPanicMenu();
return;
}

const chosenKey = e.key;
print(`Key detected: ${chosenKey} — activating in 1 second...`);

setTimeout(() => {
panicKey = chosenKey;
print(`Panic key successfully set to: ${panicKey}`);

if (panicKeyListener) {
document.removeEventListener('keydown', panicKeyListener);
}

panicKeyListener = (ev) => {
if (ev.key === panicKey) {
ev.preventDefault();
window.open('https://www.google.com', '_blank');
window.close();
}
};
document.addEventListener('keydown', panicKeyListener);

document.removeEventListener('keydown', tempListener);
drawPanicMenu();
}, 1000);
};

document.addEventListener('keydown', tempListener);
}

// Replaced openInBlankTab with direct navigation (replaces current tab)
function navigateTo(url) {
window.location.replace(url);
}

function cloakTab() {
const newWin = window.open('about:blank', '_blank');
if (newWin) {
newWin.document.open();
newWin.document.write(document.documentElement.outerHTML);
newWin.document.close();
setTimeout(() => window.close(), 300);
} else {
print('Popup blocked — allow popups for Cloak Tab.', 'error');
}
}

function newBlankWindow() {
window.open('', '_blank', 'width=1200,height=800,menubar=no,toolbar=no,location=no,status=no,resizable=yes');
}

function processCommand(input) {
const cmd = (input || '').trim().toLowerCase().replace(/^0+/, '');

if (currentMenu === 'main') {
if (cmd === '1') { currentMenu = 'games'; drawGamesMenu(); }
else if (cmd === '2') { currentMenu = 'ai'; drawAIMenu(); }
else if (cmd === '3') { currentMenu = 'shortcuts'; drawShortcutsMenu(); }
else if (cmd === '99' || cmd === 'exit' || cmd === 'quit') {
print('Goodbye.');
setTimeout(() => window.close(), 900);
} else if (cmd) {
print(`? ${cmd}`, 'error');
}
}

else if (currentMenu === 'games') {
if (cmd === '1') navigateTo('https://plinko-game-online.github.io/');
else if (cmd === '2') navigateTo('https://0706970-collab.github.io/googleclassroom/');
else if (cmd === '3') navigateTo('https://0706970-collab.github.io/gta/');
else if (cmd === '4' || cmd === 'back') { currentMenu = 'main'; drawMainMenu(); }
else if (cmd) print(`? ${cmd}`, 'error');
}

else if (currentMenu === 'ai') {
if (cmd === '1') navigateTo('https://0706970-collab.github.io/Jesko-ai/');
else if (cmd === '2') navigateTo('https://grok.com/');
else if (cmd === '3' || cmd === 'back') { currentMenu = 'main'; drawMainMenu(); }
else if (cmd) print(`? ${cmd}`, 'error');
}

else if (currentMenu === 'shortcuts') {
if (cmd === '1') {
newBlankWindow();
}
else if (cmd === '2') {
cloakTab();
}
else if (cmd === '3') {
currentMenu = 'panic';
drawPanicMenu();
}
else if (cmd === '4' || cmd === 'exit' || cmd === 'back') {
currentMenu = 'main';
drawMainMenu();
} else if (cmd) {
print(`? ${cmd}`, 'error');
}
}

else if (currentMenu === 'panic') {
if (cmd === '1') {
removePanicKeybind();
drawPanicMenu();
}
else if (cmd === '2') {
setPanicKeybind();
return;
}
else if (cmd === '3' || cmd === 'exit' || cmd === 'back') {
currentMenu = 'shortcuts';
drawShortcutsMenu();
} else if (cmd) {
print(`? ${cmd}`, 'error');
}
}
}

commandInput.addEventListener('keydown', function(e) {
if (e.key === 'Enter') {
e.preventDefault();
const cmd = commandInput.value;
processCommand(cmd);
commandInput.value = '';
}
});

// Keep input focused
function refocus() {
commandInput.focus();
}

document.addEventListener('click', () => {
if (!lockScreen.classList.contains('hidden')) {
passInput.focus();
} else {
refocus();
}
});

window.addEventListener('blur', () => {
if (!lockScreen.classList.contains('hidden')) {
setTimeout(() => passInput.focus(), 100);
} else {
setTimeout(refocus, 100);
}
});
</script>
</body>
</html>
